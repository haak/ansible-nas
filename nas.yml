---
- name: Ansible-NAS
  hosts: all

  roles:
    ###
    ### Requirements
    ###
    - role: ansible-nas-users
      tags:
        - ansible-nas-users
        - ansible-nas
      when: (ansible_nas_users_enabled | default(False))

    - role: bertvv.samba
      tags:
        - samba
        - skip_ansible_lint
      when: (bertvv_samba_enabled | default(False))

    - role: geerlingguy.nfs
      tags:
        - nfs
        - skip_ansible_lint
      when: (nfs_enabled | default(False))

    - role: geerlingguy.docker
      when: ansible_architecture == "x86_64" and geerlingguy_docker_enabled | default(False)
      tags:
        - docker
        - skip_ansible_lint

    - role: geerlingguy.docker_arm
      when: ansible_architecture == "aarch64" and geerlingguy_docker_enabled | default(False)
      tags:
        - docker_arm
        - skip_ansible_lint

    - role: hurricanehrndz.rustup
      tags:
        - rustup
      when: (rustup_enabled | default(False))

    - role: rust
      tags:
        - rust
      when:
        - rust_enabled | default(False)
    - role: artis3n.tailscale
      tags:
        - tailscale
      when: (tailscale_enabled | default(False))

    - role: geerlingguy.ansible
      tags:
        - ansible
      when: (ansible_enabled | default(False))

    - role: docker
      tags:
        - docker
      when: (docker_enabled | default(False))

    - role: geerlingguy.git
      tags:
        - git
      when: (git_enabled | default(False))

    - role: geerlingguy.go
      tags:
        - go
      when: (go_enabled | default(False))

    - role: geerlingguy.ntp
      tags:
        - ntp
      when: (ntp_role_enabled | default(False))

    - role: linux
      tags:
        - linux
      when:
        - linux_enabled | default(False)

    - role: taskfzf
      tags:
        - taskfzf
      when:
        - taskfzf_enabled | default(False)
    - role: taskwarrior
      tags:
        - taskwarrior
      when:
        - taskwarrior_enabled | default(False)
    - role: hosts
      tags:
        - hosts
      when:
        - hosts_enabled | default(False)

    ###
    ### Ansible-NAS Roles
    ###
    - role: ansible-nas-general
      tags:
        - ansible-nas-general
        - ansible-nas
      when: (ansible_nas_general_enabled | default(False))

    - role: ansible-nas-docker
      tags:
        - ansible-nas-docker
        - ansible-nas
      when: (ansible_nas_docker_enabled | default(False))

    ###
    ### Stacks
    ###

    - role: logging
      tags:
        - logging


    ###
    ### Stacks
    ###

    - role: logging
      tags:
        - logging


    ###
    ### Applications
    ###
    - role: airsonic
      tags:
        - airsonic
      when: (airsonic_enabled | default(False))

    - role: bazarr
      tags:
        - bazarr
      when: (bazarr_enabled | default(False))

    - role: bitwarden
      tags:
        - bitwarden
      when: (bitwarden_enabled | default(False))

    - role: booksonic
      tags:
        - booksonic
      when: (booksonic_enabled | default(False))

    - role: calibre
      tags:
        - calibre
      when: (calibre_enabled | default(False))

    - role: cloudcmd
      tags:
        - cloudcmd
      when: (cloudcmd_enabled | default(False))

    - role: cloudflare_ddns
      tags:
        - cloudflare_ddns
      when: (cloudflare_ddns_enabled | default(False))

    - role: code-server
      tags:
        - code-server
      when: (code_server_enabled | default(False))

    - role: couchpotato
      tags:
        - couchpotato
      when: (couchpotato_enabled | default(False))

    - role: dashy
      tags:
        - dashy
      when: (dashy_enabled | default(False))

    - role: ddns_updater
      tags:
        - ddns_updater

    - role: ddns_updater
      tags:
        - ddns_updater

    - role: deluge
      tags:
        - deluge
      when: (deluge_enabled | default(False))

    - role: dokuwiki
      tags:
        - dokuwiki
      when: (dokuwiki_enabled | default(False))

    - role: drone-ci
      tags:
        - drone_ci
      when: (drone_ci_enabled | default(False))

    - role: duplicacy
      tags:
        - duplicacy
      when: (duplicacy_enabled | default(False))

    - role: duplicati
      tags:
        - duplicati
      when: (duplicati_enabled | default(False))

    - role: emby
      tags:
        - emby
      when: (emby_enabled | default(False))

    - role: esphome
      tags:
        - esphome
      when: (esphome_enabled | default(False))

    - role: firefly
      tags:
        - firefly
      when: (firefly_enabled | default(False))

    - role: actualbudget
      tags:
        - actualbudget
      when: (actual_enabled | default(False))

    - role: homepage
      tags:
        - homepage
      when: (homepage_enabled | default(False))

    - role: freshrss
      tags:
        - freshrss

    - role: get_iplayer
      tags:
        - get_iplayer

    - role: gitea
      tags:
        - gitea
      when: (gitea_enabled | default(False))

    - role: gitlab
      tags:
        - gitlab

    - role: glances
      tags:
        - glances

    - role: gotify
      tags:
        - gotify

    - role: guacamole
      tags:
        - guacamole

    - role: healthchecks.io
      tags:
        - healthchecks.io

    - role: heimdall
      tags:
        - heimdall

    - role: hello_world
      tags:
        - hello_world
      when: (hello_world_enabled | default(False))

    - role: homeassistant
      tags:
        - homeassistant

    - role: homebridge
      tags:
        - homebridge

    - role: jackett
      tags:
        - jackett

    - role: jellyfin
      tags:
        - jellyfin

    - role: joomla
      tags:
        - joomla

    - role: komga
      tags:
        - komga

    - role: krusader
      tags:
        - krusader

    - role: lidarr
      tags:
        - lidarr

    - role: loki
      tags:
        - loki

    - role: mealie
      tags:
        - mealie

    - role: minecraft-server
      tags:
        - minecraft-server

    - role: minidlna
      tags:
        - minidlna

    - role: miniflux
      tags:
        - miniflux

    - role: minio
      tags:
        - minio

    - role: mosquitto
      tags:
        - mosquitto

    - role: mumble
      tags:
        - mumble

    - role: mylar
      tags:
        - mylar

    - role: mymediaforalexa
      tags:
        - mymediaforalexa

    - role: n8n
      tags:
        - n8n

    - role: navidrome
      tags:
        - navidrome

    - role: netbootxyz
      tags:
        - netbootxyz

    - role: netdata
      tags:
        - netdata

    - role: nextcloud
      tags:
        - nextcloud

    - role: nomad
      tags:
        - nomad
      when: (nomad_enabled | default(False))

    - role: nzbget
      tags:
        - nzbget

    - role: octoprint
      tags:
        - octoprint

    - role: ombi
      tags:
        - ombi

    - role: openhab
      tags:
        - openhab

    - role: organizr
      tags:
        - organizr

    - role: overseerr
      tags:
        - overseerr

    - role: paperless_ng
      tags:
        - paperless_ng

    - role: piwigo
      tags:
        - piwigo

    - role: plex
      tags:
        - plex

    - role: portainer
      tags:
        - portainer

    - role: prowlarr
      tags:
        - prowlarr

    - role: promtail
      tags:
        - promtail

    - role: pyload
      tags:
        - pyload

    - role: pytivo
      tags:
        - pytivo

    - role: radarr
      tags:
        - radarr

    - role: route53_ddns
      tags:
        - route53_ddns

    - role: rssbridge
      tags:
        - rssbridge

    - role: sabnzbd
      tags:
        - sabnzbd

    - role: sickchill
      tags:
        - sickchill

    - role: sonarr
      tags:
        - sonarr

    - role: speedtest-tracker
      tags:
        - speedtest-tracker

    - role: stats
      tags:
        - stats

    - role: syncthing
      tags:
        - syncthing

    - role: tautulli
      tags:
        - tautulli

    - role: thelounge
      tags:
        - thelounge

    - role: tiddlywiki
      tags:
        - tiddlywiki

    - role: timemachine
      tags:
        - timemachine

    - role: traefik
      tags:
        - traefik

    - role: transmission
      tags:
        - transmission

    - role: transmission-with-openvpn
      tags:
        - transmission_with_openvpn

    - role: ubooquity
      tags:
        - ubooquity

    - role: utorrent
      tags:
        - utorrent

    - role: virtual_desktop
      tags:
        - virtual_desktop

    - role: wallabag
      tags:
        - wallabag

    - role: watchtower
      tags:
        - watchtower

    - role: wireshark
      tags:
        - wireshark

    - role: woodpecker-ci
      tags:
        - woodpecker_ci

    - role: youtubedlmaterial
      tags:
        - youtubedlmaterial

    - role: znc
      tags:
        - znc

    - role: vscode-server
      tags:
        - vscode-server
      when: (vscode_server_enabled | default(False))

    - role: uptimekuma
      tags:
        - uptimekuma
      when: (uptimekuma_enabled | default(False))

    - role: samba
      tags:
        - samba
      when: (samba_enabled | default(False))

    - role: qbittorrent
      tags:
        - qbittorrent
      when: (qbittorrent_enabled | default(False))

    - role: photoprism
      tags:
        - photoprism
      when: (photoprism_enabled | default(False))

    - role: openbudgeteer
      tags:
        - openbudgeteer
      when: (openbudgeteer_enabled | default(False))
    - role: openbooks
      tags:
        - openbooks
      when: (openbooks_enabled | default(False))

    - role: prowlarr
      tags:
        - prowlarr
      when: (prowlarr_enabled | default(False))

    - role: linx
      tags:
        - linx
      when: (linx_enabled | default(False))

    - role: lidarr
      tags:
        - lidarr
      when: (lidarr_enabled | default(False))

    - role: jellyfin
      tags:
        - jellyfin
      when: (jellyfin_enabled | default(False))

    - role: guacamole
      tags:
        - guacamole
      when: (guacamole_enabled | default(False))

    - role: grafana
      tags:
        - grafana
      when: (grafana_enabled | default(False))

    - role: firefly-3
      tags:
        - firefly-3
      when: (firefly_3_enabled | default(False))

    - role: dozzle
      tags:
        - dozzle
      when: (dozzle_enabled | default(False))

    - role: cf-companion
      tags:
        - cf-companion
      when: (cf_companion_enabled | default(False))

    - role: cloudflare-ddns
      tags:
        - cloudflare-ddns
      when: (cloudflare_ddns_enabled | default(False))

    - role: server
      tags:
        - server
      when: (server_enabled | default(False))

    - role: autoheal
      tags:
        - autoheal
      when: (autoheal_enabled | default(False))

    - role: caddy
      tags:
        - caddy
      when: (caddy_enabled | default(False))

    - role: wireguard-gui
      tags:
        - wireguard-gui
      when: (wireguard_gui_enabled | default(False))

    - role: paperless_ng
      tags:
        - paperless_ng
      when: (paperless_ng_enabled | default(False))

    - role: homer
      tags:
        - homer
      when: (homer_enabled | default(False))

    - role: nginx_proxy_manager
      tags:
        - nginx_proxy_manager
      when: (nginx_proxy_manager_enabled | default(False))

    - role: traefik
      tags:
        - traefik
      when: (traefik_enabled | default(False))

    - role: bazarr
      tags:
        - bazarr
      when: (bazarr_enabled | default(False))

    - role: emby
      tags:
        - emby
      when: (emby_enabled | default(False))

    - role: homeassistant
      tags:
        - homeassistant
      when: (homeassistant_enabled | default(False))

    - role: jackett
      tags:
        - jackett
      when: (jackett_enabled | default(False))

    - role: lidarr
      tags:
        - lidarr
      when: (lidarr_enabled | default(False))

    - role: minidlna
      tags:
        - minidlna
      when: (minidlna_enabled | default(False))

    - role: n8n
      tags:
        - n8n_enabled
      when: (n8n_enabled | default(False))

    - role: nextcloud
      tags:
        - nextcloud
      when: (nextcloud_enabled | default(False))

    - role: portainer
      tags:
        - portainer
      when: (portainer_enabled | default(False))

    - role: prowlarr
      tags:
        - prowlarr
      when: (prowlarr_enabled | default(False))

    - role: ombi
      tags:
        - ombi
      when: (ombi_enabled | default(False))

    - role: radarr
      tags:
        - radarr
      when: (radarr_enabled | default(False))

    - role: sonarr
      tags:
        - sonarr
      when: (sonarr_enabled | default(False))

    - role: syncthing_desktop
      tags:
        - syncthing_desktop
      when: (syncthing_desktop_enabled | default(False))

    - role: watchtower
      tags:
        - watchtower
      when: (watchtower_enabled | default(False))

    - role: webtop
      tags:
        - webtop
      when: (webtop_enabled | default(False))

    - role: pihole
      tags:
        - pihole
      when: (pihole_enabled | default(False))

    - role: vaultwarden
      tags:
        - vaultwarden
      when: (vaultwarden_enabled | default(False))

    - role: sabnzbd
      tags:
        - sabnzbd
      when: (sabnzbd_enabled | default(False))

    - role: beancount-fava
      tags:
        - beancount-fava
        - beancount
        - fava
      when: (beancount_fava_enabled | default(False))

    - role: duf
      tags:
        - duf
      when: (duf_enabled | default(False))

    - role: pigallery2
      tags:
        - pigallery2
      when: (pigallery2_enabled | default(False))

    - role: budge
      tags:
        - budge
      when: (budge_enabled | default(False))

    - role: audiobookshelf
      tags:
        - audiobookshelf
      when: (audiobookshelf_enabled | default(False))

    - role: deemix
      tags:
        - deemix
      when: (deemix_enabled | default(False))

    - role: dashdot
      tags:
        - dashdot
      when: (dashdot_enabled | default(False))

    - role: tmux
      tags:
        - tmux
      when: (tmux_enabled | default(False))

    - role: zsh
      tags:
        - zsh
      when: (zsh_enabled | default(False))

    - role: gantsign.oh-my-zsh
      tags:
        - oh-my-zsh
      when: (oh_my_zsh_enabled | default(False))

    - role: aur
      tags:
        - aur
      when: (aur_enabled | default(False))

    - role: archlinux
      tags:
        - archlinux
      when: (archlinux_enabled | default(False))

    - role: gnome
      tags:
        - gnome
      when: (gnome_enabled | default(False))

    - role: flatpak
      tags:
        - flatpak
      when: (flatpak_enabled | default(False))

    - role: snap
      tags:
        - snap
      when: (snap_enabled | default(False))

    - role: ssh
      tags:
        - ssh
      when: (ssh_enabled | default(False))
    - role: serviio
      tags:
        - serviio
      when: (serviio_enabled | default(False))
    - role: semaphore
      tags:
        - semaphore
      when: (semaphore_enabled | default(False))
    - role: homarr
      tags:
        - homarr
      when: (homarr_enabled | default(False))
